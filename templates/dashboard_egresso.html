{% extends 'basepro.html' %}

{% block titulo %}
    <h1 style="text-align: center; margin-bottom: 20px;">Gráficos de Autoavaliação Egressos</h1>
{% endblock %}

{% block conteudo %}
    <h2 style="text-align: center;">Gráficos Gerados</h2>
    
    <!-- Exibir mensagens de flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul>
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

        <!-- Container para gráficos -->
        <div class="container my-4">
            <div class="row">
                {% for grafico in graficos %}
                    <div class="col-md-6 mb-4">
                        <img src="data:image/png;base64,{{ grafico }}" class="img-fluid" alt="Gráfico Gerado">
                    </div>
                {% endfor %}
            </div>
        </div>

    <!-- Botões de Fechar, Análise de Sentimento e Análise Estratégica com IA -->
    <div style="text-align: center; margin-top: 40px;">
        <!-- Botão para fechar -->
        <button type="button" onclick="fechar()" class="btn btn-danger" style="padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Fechar</button>
        
        <!-- Formulário para Analisar Sentimentos -->
        <form action="{{ url_for('avaliacaoegresso.analisar_sentimentos_egresso') }}" method="get" style="display: inline-block; margin-left: 20px;">
            <button type="submit" class="btn btn-primary">Analisar Sentimentos</button>
        </form>

        <!-- Botão para gerar Análise Estratégica com IA -->
        <a href="{{ url_for('avaliacaoegresso.exibir_recomendacoes_egresso') }}" class="btn btn-primary">Recomendações por Programa</a>

    </div>

    <!-- Script para fechar a página -->
    <script>
        function fechar() {
           window.location.href = "{{ url_for('login.get_proreitor') }}";
       }
   </script>
{% endblock %}

