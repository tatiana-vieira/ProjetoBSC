{% extends 'basecorden.html' %}

{% block titulo %}
    Editar Meta
{% endblock %}

{% block conteudo %}
<div class="container" style="max-width: 80%; margin-top: 30px;">
    <div class="card">
      <div class="card-header" style="background-color: #054b91;">
        <h4 style="text-align: center; color: #ffffff;">Alterar Metas</h4> <!-- Título com fundo azul e texto branco -->
      </div>
    <form method="POST" action="{{ url_for('planejamento.alterar_metape', metape_id=meta.id) }}">
        <!-- Campos para editar a meta -->
        <div class="form-group">
            <label for="nome">Nome da Meta</label>
            <input type="text" class="form-control" id="nome" name="nome" value="{{ meta.nome }}" required><br>
        </div>
        <div class="form-group">
            <label for="descricao">Descrição</label>
            <textarea class="form-control" id="descricao" name="descricao" required>{{ meta.descricao }}</textarea><br>
        </div>
        <div class="form-group">
            <label for="responsavel">Responsável</label>
            <input type="text" class="form-control" id="responsavel" name="responsavel" value="{{ meta.responsavel }}" required><br>
        </div>
        <div class="form-group">
            <label for="recursos">Recursos Necessários</label>
            <textarea class="form-control" id="recursos" name="recursos" required>{{ meta.recursos_necessarios }}</textarea><br>
        </div>
        <div class="form-group">
            <label for="data_inicio">Data de Início</label>
            <input type="date" class="form-control" id="data_inicio" name="data_inicio" value="{{ meta.data_inicio }}" required><br>
        </div>
        <div class="form-group">
            <label for="data_termino">Data de Término</label>
            <input type="date" class="form-control" id="data_termino" name="data_termino" value="{{ meta.data_termino }}" required><br>
        </div>
        
        <!-- Campos para Status Inicial e Status -->
        <div class="form-group">
            <label for="status_inicial">Status Inicial (em %)</label>
            <input type="number" class="form-control" id="status_inicial" name="status_inicial" value="{{ meta.status_inicial }}" min="0" max="100" step="1" required><br>
        </div>
        <div class="form-group">
            <label for="status">Descrição do Status</label>
            <select class="form-control" id="status" name="status" required>
                <option value="Não iniciado" {% if meta.status == "Não iniciado" %}selected{% endif %}>Não iniciado</option>
                <option value="Em andamento" {% if meta.status == "Em andamento" %}selected{% endif %}>Em andamento</option>
                <option value="Concluída" {% if meta.status == "Concluída" %}selected{% endif %}>Concluída</option>
                <option value="Atrasada" {% if meta.status == "Atrasada" %}selected{% endif %}>Atrasada</option>
                <option value="Pausada" {% if meta.status == "Pausada" %}selected{% endif %}>Pausada</option>
            </select><br>
        </div>
        
        <div class="form-group">
            <label for="valor_alvo">Valor Alvo</label>
            <input type="number" class="form-control" id="valor_alvo" name="valor_alvo" value="{{ meta.valor_alvo }}" step="0.01" required><br>
        </div>

        <!-- Botões de salvar e fechar -->
        <div style="text-align: center; margin-top: 40px;">

            <button type="submit" class="btn btn-primary">Salvar</button>
            <button type="button" onclick="fechar()" class="btn btn-danger" style="margin-left: 10px;">Fechar</button>
        </div>
    </form>

    <!-- Script para fechar a página e voltar -->
    <script>
        function fechar() {
            window.location.href = "{{ url_for('planejamento.associar_metaspe') }}";
        }
    </script>
{% endblock %}
