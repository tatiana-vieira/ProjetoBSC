{% extends 'basepro.html' %}

{% block titulo %}
    {{ 'Editar Objetivo' if objetivo else 'Cadastro de Objetivo' }} - PRPPG
{% endblock %}

{% block conteudo %}
<div class="container" style="max-width: 80%; margin-top: 30px;">
    <div class="card">
        <div class="card-header" style="background-color: #054b91;">
            <h4 style="text-align: center; color: #ffffff;">{{ 'Editar Objetivo' if objetivo else 'Cadastro de Objetivo' }}</h4> <!-- Título com fundo azul e texto branco -->
        </div>
        <div class="card-body">
            {% if success_message %}
                <div style="color: green; margin-bottom: 20px; text-align: center;">{{ success_message }}</div>
            {% endif %}
            <form id="Objetivo" method="POST">
                <label for="nome">Nome do Objetivo:</label>
                <input type="text" id="nome" name="nome" value="{{ objetivo.nome if objetivo else '' }}" required style="width: 100%; margin-bottom: 10px;">
                
                <label for="bsc">BSC:</label>
                <select id="bsc" name="bsc" required style="width: 100%; margin-bottom: 10px;">
                    <option value="Recursos" {% if objetivo and objetivo.bsc == 'Recursos' %}selected{% endif %}>Recursos</option>
                    <option value="Usuário e Comunidade" {% if objetivo and objetivo.bsc == 'Usuário e Comunidade' %}selected{% endif %}>Usuário e Comunidade</option>
                    <option value="Processos Internos" {% if objetivo and objetivo.bsc == 'Processos Internos' %}selected{% endif %}>Processos Internos</option>
                    <option value="Resultado" {% if objetivo and objetivo.bsc == 'Resultado' %}selected{% endif %}>Resultado</option>
                </select>
                
                <label for="pdi">Selecione o PDI:</label>
                <select id="pdi" name="pdi_id" required style="width: 100%; margin-bottom: 10px;">
                    {% for pdi in lista_pdis %}
                        <option value="{{ pdi.id }}" {% if objetivo and objetivo.pdi_id == pdi.id %}selected{% endif %}>{{ pdi.nome }}</option>
                    {% endfor %}
                </select>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button type="submit" style="background-color: darkblue; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">{{ 'Atualizar' if objetivo else 'Cadastrar' }}</button>
                    <button type="button" onclick="alterar()" style="background-color: #065110; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">Alterar</button>
                    <button type="button" onclick="fechar()" style="background-color: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">Fechar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function alterar() {
        window.location.href = "{{ url_for('lista_objetivos') }}";
    }
    function fechar() {
        window.location.href = "{{ url_for('login.get_proreitor') }}";
    }
</script>
{% endblock %}
