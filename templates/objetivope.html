{% extends 'basecord.html' %}

{% block titulo %}
    Cadastro do Planejamento Estratégico - PRPPG
{% endblock %}

{% block conteudo %}
<form method="POST" action="{{ url_for('associar_objetivospe') }}">
    <label for="planejamento">Selecione o Planejamento Estratégico:</label>
    <select name="planejamento_id" required>
        {% for pe, objetivos in objetivos_por_planejamento %}
            <option value="{{ pe.id }}">{{ pe.nome }}</option>
        {% endfor %}
    </select>
    <br>

    <!-- Campo para selecionar objetivos associados a este planejamento estratégico -->
    <label for="objetivos">Objetivos do PDI:</label>
    <select name="objetivo_id" required>
        {% for pe, objetivos in objetivos_por_planejamento %}
            {% for objetivo in objetivos %}
                <option value="{{ objetivo.id }}">{{ objetivo.nome }}</option>
            {% endfor %}
        {% endfor %}
    </select>

    <label for="nome">Nome do Objetivo:</label>
    <input type="text" id="nome" name="nome" required style="width: 100%; margin-bottom: 10px;"><br>
    <button type="submit" style="background-color: darkblue; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Cadastrar</button>
    <button type="button" onclick="cancelar()" style="background-color: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">Cancelar</button><br>
</form>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }} mt-3" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<script>
    function cancelar() {
        // Redireciona para a página do coordenador após o login
        window.location.href = "{{ url_for('login.get_coordenador') }}";
    }
</script>
{% endblock %}