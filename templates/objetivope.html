{% extends 'basecord.html' %}

{% block titulo %}
    Cadastro do Planejamento Estratégico - PRPPG
{% endblock %}

{% block conteudo %}
<form method="POST" action="{{ url_for('associar_objetivospe') }}">
    <label for="planejamento">Selecione o Planejamento Estratégico:</label>
    <select name="planejamento_id" required>
        {% for pe, objetivos in objetivos_por_planejamento %}
            <option value="{{ pe.id }}">{{ pe.nome }}</option>
        {% endfor %}
    </select>
    <br>

    <!-- Campo para selecionar objetivos associados a este planejamento estratégico -->
    <label for="objetivos">Objetivos do PDI:</label>
    <select name="objetivo_id" required>
        {% for pe, objetivos in objetivos_por_planejamento %}
            {% for objetivo in objetivos %}
                <option value="{{ objetivo.id }}">{{ objetivo.nome }}</option>
            {% endfor %}
        {% endfor %}
    </select>

    <label for="nome">Nome do Objetivo:</label>
    <input type="text" id="nome" name="nome" required style="width: 100%; margin-bottom: 10px;"><br>
    <button type="submit" style="background-color: darkblue; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Cadastrar</button>
    <button type="button" onclick="cancelar()" style="background-color: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">Cancelar</button><br>
</form>

<script>
  function cancelar() {
      // Exibe um aviso de confirmação antes de redirecionar
      if (confirm('Tem certeza que deseja cancelar?')) {
          // Redireciona o usuário para a página principal definida no Flask
          window.location.href = '{{ url_for("index") }}'; // Altere "index" para a função correta, se necessário
      }
  }
</script>
{% endblock %}