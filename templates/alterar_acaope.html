{% extends 'basecorden.html' %}

{% block titulo %}
    Planejamento Estratégico - Alterar Ação
{% endblock %}

{% block conteudo %}
<div style="margin: auto; width: 60%;">
    <!-- Mensagens Flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div>
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} text-center">{{ message }}</div>
        {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    <!-- Fim das Mensagens Flash -->

    <h1 style="text-align: center;">Alterar Ação</h1>
    <form action="{{ url_for('planejamento.alterar_acaope', acao_id=acao.id) }}" method="POST">
       <div style="text-align: left; margin-bottom: 15px;">
           <label for="data_termino">Data de Término:</label><br>
           <input type="date" id="data_termino" name="data_termino" value="{{ acao.data_termino }}" required style="width: 80%;"><br>
       </div>

       <div style="text-align: left; margin-bottom: 15px;">
           <label for="responsavel">Responsável:</label><br>
           <input type="text" id="responsavel" name="responsavel" value="{{ acao.responsavel }}" required style="width: 80%;"><br>
       </div>

       <div style="text-align: left; margin-bottom: 15px;">
           <label for="status">Status:</label><br>
           <select id="status" name="status" required style="width: 80%;">
               <option value="Planejada" {% if acao.status == 'planejada' %}selected{% endif %}>Planejada</option>
               <option value="Em_andamento" {% if acao.status == 'em_andamento' %}selected{% endif %}>Em Andamento</option>
               <option value="Concluída" {% if acao.status == 'concluída' %}selected{% endif %}>Concluída</option>
               <option value="Atrasada" {% if acao.status == 'atrasada' %}selected{% endif %}>Atrasada</option>
               <option value="Cancelada" {% if acao.status == 'cancelada' %}selected{% endif %}>Cancelada</option>
           </select><br>
       </div>

       <div style="text-align: left; margin-bottom: 15px;">
           <label for="observacao">Observação:</label><br>
           <textarea id="observacao" name="observacao" rows="4" style="width: 80%;">{{ acao.observacao }}</textarea><br>
       </div>

       <div style="text-align: left; margin-bottom: 15px;">
           <label for="porcentagem_execucao">Porcentagem da Execução:</label><br>
           <input type="number" id="porcentagem_execucao" name="porcentagem_execucao" value="{{ acao.porcentagem_execucao }}" required style="width: 80%;"><br>
       </div>

       <div style="text-align: center;">
           <button type="submit" style="background-color: darkblue; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Salvar</button>
           <button type="button" onclick="fechar()" style="background-color: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">Fechar</button>
       </div>
    </form>
</div>

<script>
    function fechar() {
        window.location.href = "{{ url_for('planejamento.associar_acaope') }}";
    }
</script>
{% endblock %}
